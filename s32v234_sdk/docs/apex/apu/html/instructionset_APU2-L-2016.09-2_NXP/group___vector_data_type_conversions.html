<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>APU2: Vector Data Type Conversions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">APU2
   &#160;<span id="projectnumber">L-2016.09-2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Vector Data Type Conversions<div class="ingroups"><a class="el" href="group___vector_data_types.html">Vector Data Types</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>Conversion between different vector datatypes, as well as some scalar to vector conversions. Type promotion, Implicit and Explicit conversions. Otherwise specified, the vector conversion behavior is essentially the same as its elements.<br/>
<br/>
 The APU2-Tools compiler does not allow implicit casting for all operations and combinations of operands. Relying on implicit casts may cause problems due to native data sizes. The scalar processor is a 32-bit processor. The vector processor is a 16-bit processor. Casting scalar types of int, int32s or int32u implicitly to vector will result in a <a class="el" href="classvec16s.html" title="Vector Data Type (signed 16-bit element). ">vec16s</a> type.<br/>
</p>
<p><b>Pure vector operations:</b> <br/>
</p>
<ul>
<li>Vectors of the same type and size may rely on implicit casting.<br/>
</li>
<li>Vectors of same size but different sign require explicit casting.<br/>
</li>
<li>Implicit casting may be used when mixing <a class="el" href="classvec16s.html" title="Vector Data Type (signed 16-bit element). ">vec16s</a> and any vec08 operands. In this case, all operands and results will be implicitly cast to <a class="el" href="classvec16s.html" title="Vector Data Type (signed 16-bit element). ">vec16s</a>.<br/>
</li>
<li>Excepting the above, all operations containing operands of different sizes require an explicit cast.<br/>
</li>
</ul>
<p><b>Mixed vector/scalar operations:</b> <br/>
</p>
<ul>
<li>No implicit casts from scalar to 32-bit vector types occur. (see above)<br/>
</li>
<li>Implicit casting may be used if both scalar and vector operands have the same size and sign, for 8- and 16-bit types. In this case, they will be converted to vector types.<br/>
</li>
<li>Implicit casting may also be used if the scalar and vector operands are of the same sign, but the scalar operand is smaller than the vector type.<br/>
</li>
<li>In all other cases, an explicit cast needed.<br/>
</li>
</ul>
<p><b>Other:</b> <br/>
 The compiler will never require an explicit cast for operations between two or more scalar operands<br/>
 Logical and relational vector operations implicitly return vbool.<br/>
 Relying on implicit casting will, where appropriate, result in an output type which is:<br/>
</p>
<ul>
<li>Vector, if at least one operand was vector.<br/>
</li>
<li>Unsigned, if all operands were of the same size but both signed and unsigned operands were present.<br/>
</li>
<li>The size is set to be the same of the largest size of the operand types.<br/>
</li>
</ul>
<p><b>Scalar to scalar</b> <br/>
 The APU-2 compiler supports all implicit type conversions from one basic scalar data type to any basic scalar data type of the same size or bigger.<br/>
 Explicit cast is needed when going to a type of small size.<br/>
 For example:<br/>
 int8u b;<br/>
 int16s a = (int16s)b;<br/>
 The compiler imposes the following casting rules:<br/>
 When the size of the destination type is less than the source type, the least significant bits are copied to the destination without any sign conversion.<br/>
</p>
<p>For example:<br/>
 int08s a;<br/>
 int16u b = 0x008F; // b = 143<br/>
<br/>
 a = b; // a = 0x8F = -113<br/>
</p>
<p><b>Scalar to vector</b> <br/>
 When a scalar assignment is applied to a vector, the scalar value is implicitly casted to all elements of the vector.<br/>
 For example,<br/>
 int16u a = 5;<br/>
 <a class="el" href="classvec16u.html" title="Vector Data Type (unsigned 16-bit element). ">vec16u</a> b = (<a class="el" href="classvec16u.html" title="Vector Data Type (unsigned 16-bit element). ">vec16u</a>)a; // all elements of vector b are equal to a ? equal to 5 <br/>
</p>
<p><b>Vector to scalar</b> <br/>
 Vector to scalar cast is prohibited and results in a compiler error.<br/>
</p>
<p><b>Pointer to scalar</b> <br/>
 The scalar pointer to a scalar is like any other pointer on a generic CPU. It represents the address where a variable of a given type is located.<br/>
 For example:<br/>
 int32u s0;<br/>
 int32u *p_s0 = <br/>
 declares p_s0 as a scalar pointer pointing to a scalar unsigned 32-bit integer stored in DMEM.<br/>
</p>
<p><b>Pointers to vectors and array of vectors</b> <br/>
 The same way we can declare scalar pointers to scalars we can declare scalar pointers to vector. For example, first we define an array of 32-bit unsigned vectors that we call v0_ar. Each element of this array is then a 32-bit unsigned vector. Then we define a pointer to a 32-bit unsigned vector and assign to it the address of the first element of our array of vector.<br/>
 We would write,<br/>
</p>
<p><a class="el" href="classvec16s.html" title="Vector Data Type (signed 16-bit element). ">vec16s</a> v0_ar[16];<br/>
 <a class="el" href="classvec16s.html" title="Vector Data Type (signed 16-bit element). ">vec16s</a> *pv_v0 = &amp;(v0_ar[0]); // Declares a pointer to a vector in CMEM<br/>
 pv_v0++; // Now point to v0_ar[1];<br/>
</p>
<p>The next line <br/>
 pv_v0++;<br/>
 increments the pointer by the vector data type size (here, the <a class="el" href="classvec16u.html" title="Vector Data Type (unsigned 16-bit element). ">vec16u</a> is 2 vecbytes*, so the pointer address increments by 2), and now pv_v0 points to the next element in the array, which is v0_ar[1].<br/>
</p>
<p>(*where a vecbyte is the smallest addressable unit in CMEM)<br/>
 </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 17 2018 11:41:00 for APU2 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
